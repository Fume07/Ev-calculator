<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8">
  <title>Korrekt Polymarket EV-Kalkulator – Netto Gevinst</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial, sans-serif; background: #f4f7fa; padding: 30px; }
    .container { background: #fff; padding: 30px; border-radius: 10px; box-shadow: 0 3px 12px #dde; max-width: 500px; margin: 0 auto; }
    h1 { text-align: center; color: #293347; }
    label { display: block; margin: 12px 0 4px; font-weight: bold; }
    input, select { width: 100%; padding: 8px; border-radius: 4px; border: 1px solid #bbb; box-sizing: border-box; }
    button { margin-top: 20px; width: 100%; background: #248aff; color: #fff; padding: 14px; border: none; border-radius: 6px; font-size: 17px; font-weight: bold; }
    .result { background: #f7fbfa; margin-top: 28px; padding: 16px; border-radius: 7px; }
    .warning { color: #cc0000; font-weight: bold; }
    .good { color: #218c36; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Nettogevinst EV-kalkulator</h1>
    <label for="probability">Sannsynlighet for seier (%)</label>
    <input id="probability" type="number" min="0" max="100" value="20">
    <label for="price">Markedspris (cent per share)</label>
    <input id="price" type="number" min="1" max="99" value="20">
    <label for="bet">Innsats ($)</label>
    <input id="bet" type="number" min="1" max="100000" value="100">
    <button onclick="calc()">Beregn Netto EV</button>
    <div class="result" id="res"></div>
  </div>
  <script>
    function calc() {
      const p = parseFloat(document.getElementById('probability').value) / 100;
      const price = parseFloat(document.getElementById('price').value) / 100;
      const bet = parseFloat(document.getElementById('bet').value);

      // Antall shares kjøpt
      const nShares = bet / price;
      // Total payout om vinner: $1 per share.
      const payout = nShares * 1.00;
      // Netto gevinst ved seier: payout minus innsats
      const netProfitPerWin = payout - bet;

      // Korrekt EV
      const EV = (p * netProfitPerWin) - ((1 - p) * bet);
      const EVpct = (EV / bet) * 100;

      let msg = `<b>EV:</b> $${EV.toFixed(2)} (${EVpct.toFixed(2)} % av innsats)<br>`;
      msg += `<b>Gevinst hvis seier:</b> $${netProfitPerWin.toFixed(2)}<br>`;
      msg += `<b>Tap hvis ikke seier:</b> -$${bet.toFixed(2)}<br>`;
      if(EV > 0) {
        msg += `<div class="good">Sterkt positiv EV – dette er matematisk lønnsomt over tid ved korrekt sannsynlighet!</div>`;
      } else {
        msg += `<span class="warning">Negativ EV – ikke lønnsomt bet i lengden.</span>`;
      }
      document.getElementById('res').innerHTML = msg;
    }
  </script>
</body>
</html>

